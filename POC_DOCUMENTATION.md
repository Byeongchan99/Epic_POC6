# Epic POC 6 - 차량 생존 게임

## 개요
톱다운 뷰 기반의 차량 생존 액션 게임입니다. 플레이어는 절차적으로 생성된 맵에서 도보와 차량을 자유롭게 전환하며 미션을 수행하고, 적을 제거하여 최종적으로 탈출하는 것을 목표로 합니다.

---

## 1. 게임이 의도한 핵심 경험

### 전략적 선택의 즐거움
- **도보 vs 차량**: 상황에 따라 도보 이동과 차량 이동을 전환하며 전략적 선택을 하는 경험
- **리소스 관리**: 스태미나와 연료라는 제한된 리소스를 관리하며 긴장감 있는 플레이
- **탐험과 생존**: 절차적으로 생성된 미지의 맵을 탐험하며 적과 맞서 생존하는 경험

### 역동적인 전투
- 도보에서는 민첩한 회피와 정밀 사격
- 차량에서는 강력한 화력과 충돌을 활용한 대담한 전투
- 두 가지 플레이 스타일을 상황에 맞게 전환하는 재미

### 미션 기반 목표 달성
- 명확한 목표(미션)와 보상을 통한 성취감
- 모든 미션을 완료하고 탈출하는 최종 목표

---

## 2. 핵심 메카닉

### 2.1 이동 시스템
#### 도보 이동
- **기본 이동**: WASD 키를 이용한 자유로운 이동
- **달리기**: Shift 키로 빠른 이동 (스태미나 소모)
- **구르기(회피)**: Space 키로 회피 동작 (무적 프레임 제공, 스태미나 소모)
- **마우스 조준**: 마우스 위치를 향해 자동으로 회전

#### 차량 이동
- **탑승/하차**: F 키로 근처 차량과 상호작용, E 키로 하차
- **운전**: WASD 키로 차량 조작, Shift 키로 부스트 (연료 추가 소모)
- **연료 시스템**: 연료가 소진되면 차량 조작 불가
- **체력 시스템**: 차량이 파괴되면 플레이어가 자동으로 하차

### 2.2 전투 시스템
#### 사격
- **도보 사격**: 마우스 좌클릭으로 발사, R 키로 재장전
- **차량 사격**: 차량 탑승 중에도 동일한 조작으로 사격 가능
- **탄약 관리**: 제한된 탄약과 재장전 시스템

#### 차량 충돌 전투
- **적 충돌**: 차량으로 적에게 충돌 시 높은 피해 + 넉백
- **벽 충돌**: 높은 속도로 벽/지형에 충돌 시 차량 피해
- **전략적 활용**: 다수의 적을 돌파하거나 빠른 제거에 유용

#### 적 AI
- **상태 기계**: 순찰(Patrol) → 추적(Chase) → 공격(Attack) → 사망(Dead)
- **탐지 범위**: 일정 거리 내 플레이어 감지
- **공격 패턴**: 원거리 사격 및 추적

### 2.3 미션 시스템
#### 배달 미션 (Delivery Mission)
- **목표**: 지정된 픽업 지점(A)에서 아이템을 획득하여 배달 지점(B)로 운반
- **미니맵 표시**: 두 지점이 미니맵에 마커로 표시됨
- **진행 방식**: F 키로 픽업 → 배달 지점으로 이동 → F 키로 배달

#### 제거 미션 (Elimination Mission)
- **목표**: 미션 구역 내 모든 적 제거
- **적 마커**: 적의 위치가 미니맵에 표시됨
- **완료 조건**: 모든 적이 사망하면 미션 완료

#### 상호작용 미션 (Interaction Mission)
- **목표**: 특정 오브젝트와 상호작용
- **확장 가능**: 다양한 상호작용 타입 추가 가능

### 2.4 맵 생성 시스템
- **절차적 생성**: Perlin Noise 기반 알고리즘으로 매번 다른 맵 생성
- **육지와 물**: 육지는 이동 가능, 물은 투명한 벽으로 구현되어 맵 경계 역할
- **연결성 보장**: 모든 육지가 연결되도록 보장 (고립된 섬 제거)
- **미션 존 배치**: 육지 위에 미션 존이 자동으로 배치됨
- **NavMesh 자동 생성**: 적 AI가 이동할 수 있도록 NavMesh 자동 베이크

### 2.5 리소스 관리
#### 플레이어
- **체력(HP)**: 적의 공격으로 감소, 0이 되면 사망
- **스태미나**: 달리기와 구르기에 사용, 시간이 지나면 자동 회복

#### 차량
- **체력**: 충돌과 적의 공격으로 감소, 0이 되면 파괴
- **연료**: 이동과 부스트에 소모, 0이 되면 조작 불가
- **디버그 키**: F1(수리), F2(연료 충전) - 개발 편의 기능

---

## 3. 코어 루프

```
1. 맵 탐색
   ↓
2. 미션 발견 (미니맵으로 위치 확인)
   ↓
3. 미션 수행
   ├─ 배달: 아이템 픽업 → 운반 → 배달
   ├─ 제거: 적 전투 및 제거
   └─ 상호작용: 오브젝트와 상호작용
   ↓
4. 전투 및 생존
   ├─ 도보: 회피와 사격
   └─ 차량: 충돌과 사격
   ↓
5. 리소스 관리
   ├─ 스태미나 회복
   └─ 연료 관리 (차량 탐승/하차 결정)
   ↓
6. 미션 완료 확인
   ├─ 미완료 → 1번으로 돌아가기
   └─ 전체 완료 → 탈출 가능
```

### 상세 설명
1. **맵 탐색**: 플레이어는 절차적으로 생성된 맵을 돌아다니며 미션 위치를 찾습니다
2. **미션 수행**: 미니맵을 보고 미션 지점으로 이동하여 목표를 달성합니다
3. **전투와 생존**: 적을 만나면 도보 또는 차량을 활용해 전투를 진행합니다
4. **전략적 선택**: 상황에 따라 도보/차량을 전환하고 리소스를 관리합니다
5. **반복과 진행**: 모든 미션을 완료할 때까지 탐색-전투-미션 사이클을 반복합니다

---

## 4. 확장성

### 4.1 콘텐츠 확장
- **다양한 미션 타입**
  - 호위 미션: NPC를 안전한 장소로 호위
  - 수집 미션: 여러 아이템을 수집
  - 시간 제한 미션: 제한 시간 내 목표 달성
  - 방어 미션: 거점을 적의 공격으로부터 방어

- **다양한 차량**
  - 속도형: 빠르지만 체력이 낮음
  - 탱크형: 느리지만 체력과 화력이 높음
  - 특수형: 특별한 능력 보유 (점프, 은신 등)

- **무기 시스템 확장**
  - 다양한 총기 타입 (권총, 소총, 샷건, 저격총 등)
  - 무기 업그레이드 및 부착물
  - 투척 무기 (수류탄, 지뢰 등)

### 4.2 시스템 확장
- **업그레이드 시스템**
  - 플레이어 스탯 강화 (체력, 스태미나, 이동속도)
  - 차량 개조 (엔진, 무기, 방어구)
  - 미션 보상으로 획득한 화폐로 구매

- **인벤토리 시스템**
  - 아이템 수집 및 관리
  - 회복 아이템, 버프 아이템
  - 연료통, 수리 키트 등 소모품

- **난이도 시스템**
  - 적의 수와 강도 조절
  - 맵 크기와 복잡도 변경
  - 리소스 드롭률 조정

### 4.3 맵 생성 확장
- **바이옴 시스템**: 사막, 숲, 눈, 도시 등 다양한 환경
- **동적 장애물**: 움직이는 오브젝트, 환경 위험 요소
- **랜드마크**: 특별한 건물과 구조물 배치

### 4.4 멀티플레이어
- **협동 모드**: 2-4명이 함께 미션 수행
- **경쟁 모드**: 미션 완료 속도 경쟁
- **PvP 모드**: 플레이어 간 전투

---

## 5. 독창성

### 5.1 하이브리드 이동 시스템
- **자유로운 전환**: 도보와 차량을 언제든지 전환 가능
- **각각의 장단점**: 도보는 민첩하고 정밀하며, 차량은 빠르고 강력함
- **전략적 깊이**: 상황에 맞는 이동 수단 선택이 게임플레이의 핵심

### 5.2 차량 충돌 전투
- **유니크한 전투 메카닉**: 차량으로 적을 직접 들이받아 제거
- **리스크와 리워드**: 충돌은 강력하지만 차량 피해 위험
- **다양한 전투 스타일**: 원거리 사격 vs 근접 충돌

### 5.3 통합 절차적 생성 시스템
- **완전한 랜덤 맵**: 매번 다른 레이아웃 생성
- **지능적인 미션 배치**: 맵 생성 시 미션 존이 자동으로 적절한 위치에 배치
- **연결성 보장**: 플레이어가 항상 모든 미션에 접근 가능하도록 보장
- **최적화된 구조**: 육지는 하나의 메시로 결합, 물 벽은 효율적인 BoxCollider로 최적화

### 5.4 미션 기반 진행 시스템
- **명확한 목표**: UI와 미니맵을 통해 목표가 명확히 제시됨
- **다양한 미션 타입**: 전투, 배달, 상호작용 등 다양한 플레이 경험
- **진행도 추적**: 완료된 미션과 남은 미션을 실시간으로 확인

### 5.5 통합 UI/미니맵 시스템
- **실시간 미니맵**: 플레이어 위치, 미션 마커, 적 위치 표시
- **리소스 시각화**: 체력, 스태미나, 탄약, 차량 상태를 직관적으로 표시
- **상황별 UI 전환**: 도보와 차량 탑승 시 UI가 자동으로 전환

---

## 기술적 구현

### 주요 시스템
- **플레이어 시스템**: `PlayerController.cs`, `PlayerStats.cs`
- **차량 시스템**: `Vehicle.cs` + Arcade Vehicle Physics 에셋 통합
- **미션 시스템**: `MissionManager.cs`, `MissionBase.cs` 및 각 미션 타입
- **맵 생성**: `MapGenerator.cs` - Perlin Noise 기반 절차적 생성
- **전투 시스템**: `Gun.cs`, `Projectile.cs`, `IDamageable.cs`
- **적 AI**: `EnemyAI.cs` + 상태 머신 패턴 (Patrol, Chase, Attack, Dead)
- **UI 시스템**: `UIManager.cs`, `MinimapController.cs`
- **게임 관리**: `GameManager.cs` - 전체 게임 흐름 관리

### 최적화
- **메시 결합**: 수천 개의 타일을 하나의 메시로 결합하여 드로우콜 최소화
- **콜라이더 최적화**: 물 벽의 개별 BoxCollider를 큰 영역별로 그룹화
- **오브젝트 풀링**: 발사체(Projectile)를 풀링하여 성능 최적화
- **이벤트 기반 아키텍처**: 불필요한 Update 호출 최소화

---

## 개발 현황

### 완료된 기능
✅ 플레이어 이동 및 전투 (도보)
✅ 차량 시스템 (탑승/하차, 운전, 사격)
✅ 리소스 관리 (체력, 스태미나, 연료)
✅ 적 AI (순찰, 추적, 공격)
✅ 미션 시스템 (배달, 제거)
✅ 절차적 맵 생성
✅ UI 및 미니맵
✅ 최적화 (메시 결합, 콜라이더 그룹화)

### 향후 추가 가능 기능
- 더 다양한 미션 타입
- 인벤토리 및 아이템 시스템
- 업그레이드 시스템
- 추가 차량 및 무기
- 사운드 및 이펙트 강화
- 멀티플레이어 지원

---

## 결론

이 POC는 도보와 차량을 자유롭게 전환하는 하이브리드 전투 시스템과 절차적 맵 생성을 결합한 톱다운 생존 게임의 핵심 메카닉을 성공적으로 구현했습니다. 명확한 코어 루프와 확장 가능한 시스템 설계로 향후 다양한 콘텐츠와 기능을 추가할 수 있는 탄탄한 기반을 마련했습니다.
